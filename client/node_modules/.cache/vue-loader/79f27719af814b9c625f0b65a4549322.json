{"remainingRequest":"E:\\workplace\\WEB\\node-app\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\workplace\\WEB\\node-app\\client\\src\\components\\FundList\\FundList.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\workplace\\WEB\\node-app\\client\\src\\components\\FundList\\FundList.vue","mtime":1539157867956},{"path":"E:\\workplace\\WEB\\node-app\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1538537971188},{"path":"E:\\workplace\\WEB\\node-app\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\workplace\\WEB\\node-app\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1538537971188},{"path":"E:\\workplace\\WEB\\node-app\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n  name: \"fund-list\",\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      allTableData: [],\r\n      formData: {\r\n        type: \"\",\r\n        describe: \"\",\r\n        income: \"\",\r\n        expend: \"\",\r\n        cash: \"\",\r\n        remark: \"\",\r\n        id: \"\"\r\n      },\r\n      dialog: {\r\n        show: false,\r\n        title: \"\",\r\n        option: \"edit\"\r\n      },\r\n      //需要给分页组件传的信息\r\n      paginations: {\r\n        page_index: 1, // 当前位于哪页\r\n        total: 0, // 总数\r\n        page_size: 5, // 1页显示多少条\r\n        page_sizes: [5, 10, 15, 20], //每页显示多少条\r\n        layout: \"total, sizes, prev, pager, next, jumper\" // 翻页属性\r\n      },\r\n      search_data: {\r\n        startTime: \"\",\r\n        endTime: \"\"\r\n      },\r\n      pickerOptions1: {\r\n        shortcuts: [\r\n          {\r\n            text: \"今天\",\r\n            onClick(picker) {\r\n              picker.$emit(\"pick\", new Date());\r\n            }\r\n          },\r\n          {\r\n            text: \"昨天\",\r\n            onClick(picker) {\r\n              const date = new Date();\r\n              date.setTime(date.getTime() - 3600 * 1000 * 24);\r\n              picker.$emit(\"pick\", date);\r\n            }\r\n          },\r\n          {\r\n            text: \"一周前\",\r\n            onClick(picker) {\r\n              const date = new Date();\r\n              date.setTime(date.getTime() - 3600 * 1000 * 24 * 7);\r\n              picker.$emit(\"pick\", date);\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.getProfiles();\r\n  },\r\n  methods: {\r\n    getProfiles() {\r\n      // 获取表格数据\r\n      this.$axios\r\n        .get(\"/api/profiles\")\r\n        .then(res => {\r\n          // console.log(res);\r\n          this.allTableData = res.data;\r\n          // 设置分页数据\r\n          this.setPaginations();\r\n        })\r\n        .catch(err => console.log(err));\r\n    },\r\n    setPaginations() {\r\n      // 分页属性设置\r\n      this.paginations.total = this.allTableData.length;\r\n      this.paginations.page_index = 1;\r\n      this.paginations.page_size = 5;\r\n      // 设置默认的分页数据\r\n      this.tableData = this.allTableData.filter((item, index) => {\r\n        return index < this.paginations.page_size;\r\n      });\r\n    },\r\n    handleEdit(index, row) {\r\n      // 编辑\r\n      this.dialog = {\r\n        show: true,\r\n        title: \"修改资金信息\",\r\n        option: \"edit\"\r\n      };\r\n\r\n      this.formData = {\r\n        type: row.type,\r\n        describe: row.describe,\r\n        income: row.income,\r\n        expend: row.expend,\r\n        cash: row.cash,\r\n        remark: row.remark,\r\n        id: row._id\r\n      };\r\n    },\r\n    handleDelete(index, row) {\r\n      console.log(index, row);\r\n    },\r\n    handleAdd() {\r\n      // 添加\r\n      this.dialog = {\r\n        show: true,\r\n        title: \"添加资金信息\",\r\n        option: \"add\"\r\n      };\r\n\r\n      this.formData = {\r\n        type: \"\",\r\n        describe: \"\",\r\n        income: \"\",\r\n        expend: \"\",\r\n        cash: \"\",\r\n        remark: \"\",\r\n        id: \"\"\r\n      };\r\n    },\r\n    handleSizeChange(page_size) {\r\n      // 切换size设置\r\n      this.paginations.page_index = 1;\r\n      this.paginations.page_size = page_size;\r\n      this.tableData = this.allTableData.filter((item, index) => {\r\n        return index < page_size;\r\n      });\r\n    },\r\n    handleCurrentChange(page) {\r\n      // 获取目标页第一项索引\r\n      let index = this.paginations.page_size * (page - 1);\r\n      // 获取目标页最后一项数据的后一项索引（即包含目标页之前所有数据数）\r\n      let nums = this.paginations.page_size * page;\r\n      // 容器\r\n      let tables = [];\r\n\r\n      for (let i = index; i < nums; i++) {\r\n        if (this.allTableData[i]) {\r\n          tables.push(this.allTableData[i]);\r\n        }\r\n        this.tableData = tables;\r\n      }\r\n    }\r\n  }\r\n};\r\n",{"version":3,"sources":["FundList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FundList.vue","sourceRoot":"src\\components\\FundList","sourcesContent":["<template>\r\n  <div class=\"fillContainer\">\r\n    <el-form :inline=\"true\" ref=\"add_data\">\r\n        <el-form-item label=\"按时间筛选:\">\r\n            <el-date-picker\r\n                v-model=\"search_data.startTime\"\r\n                type=\"datetime\"\r\n                placeholder=\"选择开始时间\"\r\n                align=\"right\"\r\n                default-time=\"00:00:00\"\r\n                :picker-options=\"pickerOptions1\">\r\n            </el-date-picker>\r\n            <el-date-picker\r\n                v-model=\"search_data.endTime\"\r\n                type=\"datetime\"\r\n                placeholder=\"选择结束时间\"\r\n                align=\"right\"\r\n                default-time=\"00:00:00\"\r\n                :picker-options=\"pickerOptions1\">\r\n            </el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item class=\"btnRight\">\r\n            <el-button type=\"primary\" size=\"small\" \r\n            icon=\"view\" @click=\"handleAdd()\">添加</el-button>\r\n        </el-form-item>\r\n    </el-form>\r\n    <div class=\"tableContainer\">\r\n        <el-table v-if=\"tableData.length > 0\" :data=\"tableData\" style=\"width: 100%\" max-height=\"450\" border>\r\n            <el-table-column\r\n                type=\"index\"\r\n                label=\"序号\"\r\n                align='center'\r\n                width=\"50\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"date\" align='center' label=\"创建时间\" width=\"200\">\r\n                <template slot-scope=\"scope\">\r\n                    {{ scope.row.date | convertTime('YYYY-MM-DD hh:mm:ss') }}\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"type\" label=\"收支类型\" align='center' width=\"110\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"describe\" label=\"收支描述\" align='center' width=\"130\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"income\" label=\"收入\" align='center' width=\"130\"> \r\n                <template slot-scope=\"scope\">  \r\n                    <span style=\"color:#00d053\">+ {{ scope.row.income }}</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"expend\" label=\"支出\" align='center' width=\"130\">\r\n                <template slot-scope=\"scope\">  \r\n                    <span style=\"color:#f56767\">- {{ scope.row.expend }}</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"cash\" label=\"账户现金\" align='center' width=\"130\">\r\n                <template slot-scope=\"scope\">  \r\n                    <span style=\"color:#4db3ff\">{{ scope.row.cash }}</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"remark\" label=\"备注\" align='center' width=\"150\">\r\n            </el-table-column>\r\n            <el-table-column \r\n                label=\"操作\"\r\n                prop=\"operation\"\r\n                align=\"center\"\r\n                fixed=\"right\"\r\n                width=\"145\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-button\r\n                    type=\"warning\"\r\n                    size=\"small\"\r\n                    icon=\"edit\"\r\n                    @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\r\n                    <el-button\r\n                    size=\"small\"\r\n                    type=\"danger\"\r\n                    icon=\"delete\"\r\n                    @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <el-row>\r\n            <!-- element布局分为24列 -->\r\n            <el-col :span=\"24\">\r\n                <div class=\"pagination\">\r\n                    <el-pagination\r\n                        @size-change=\"handleSizeChange\"\r\n                        @current-change=\"handleCurrentChange\"\r\n                        :current-page.sync=\"paginations.page_index\"\r\n                        :page-sizes=\"paginations.page_sizes\"\r\n                        :page-size=\"paginations.page_size\"\r\n                        :layout=\"paginations.layout\"\r\n                        :total=\"paginations.total\">\r\n                    </el-pagination>\r\n                </div>\r\n            </el-col>\r\n        </el-row>\r\n    </div>\r\n    <my-dialog :formData=\"formData\" :dialog=\"dialog\" @update=\"getProfiles\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"fund-list\",\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      allTableData: [],\r\n      formData: {\r\n        type: \"\",\r\n        describe: \"\",\r\n        income: \"\",\r\n        expend: \"\",\r\n        cash: \"\",\r\n        remark: \"\",\r\n        id: \"\"\r\n      },\r\n      dialog: {\r\n        show: false,\r\n        title: \"\",\r\n        option: \"edit\"\r\n      },\r\n      //需要给分页组件传的信息\r\n      paginations: {\r\n        page_index: 1, // 当前位于哪页\r\n        total: 0, // 总数\r\n        page_size: 5, // 1页显示多少条\r\n        page_sizes: [5, 10, 15, 20], //每页显示多少条\r\n        layout: \"total, sizes, prev, pager, next, jumper\" // 翻页属性\r\n      },\r\n      search_data: {\r\n        startTime: \"\",\r\n        endTime: \"\"\r\n      },\r\n      pickerOptions1: {\r\n        shortcuts: [\r\n          {\r\n            text: \"今天\",\r\n            onClick(picker) {\r\n              picker.$emit(\"pick\", new Date());\r\n            }\r\n          },\r\n          {\r\n            text: \"昨天\",\r\n            onClick(picker) {\r\n              const date = new Date();\r\n              date.setTime(date.getTime() - 3600 * 1000 * 24);\r\n              picker.$emit(\"pick\", date);\r\n            }\r\n          },\r\n          {\r\n            text: \"一周前\",\r\n            onClick(picker) {\r\n              const date = new Date();\r\n              date.setTime(date.getTime() - 3600 * 1000 * 24 * 7);\r\n              picker.$emit(\"pick\", date);\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.getProfiles();\r\n  },\r\n  methods: {\r\n    getProfiles() {\r\n      // 获取表格数据\r\n      this.$axios\r\n        .get(\"/api/profiles\")\r\n        .then(res => {\r\n          // console.log(res);\r\n          this.allTableData = res.data;\r\n          // 设置分页数据\r\n          this.setPaginations();\r\n        })\r\n        .catch(err => console.log(err));\r\n    },\r\n    setPaginations() {\r\n      // 分页属性设置\r\n      this.paginations.total = this.allTableData.length;\r\n      this.paginations.page_index = 1;\r\n      this.paginations.page_size = 5;\r\n      // 设置默认的分页数据\r\n      this.tableData = this.allTableData.filter((item, index) => {\r\n        return index < this.paginations.page_size;\r\n      });\r\n    },\r\n    handleEdit(index, row) {\r\n      // 编辑\r\n      this.dialog = {\r\n        show: true,\r\n        title: \"修改资金信息\",\r\n        option: \"edit\"\r\n      };\r\n\r\n      this.formData = {\r\n        type: row.type,\r\n        describe: row.describe,\r\n        income: row.income,\r\n        expend: row.expend,\r\n        cash: row.cash,\r\n        remark: row.remark,\r\n        id: row._id\r\n      };\r\n    },\r\n    handleDelete(index, row) {\r\n      console.log(index, row);\r\n    },\r\n    handleAdd() {\r\n      // 添加\r\n      this.dialog = {\r\n        show: true,\r\n        title: \"添加资金信息\",\r\n        option: \"add\"\r\n      };\r\n\r\n      this.formData = {\r\n        type: \"\",\r\n        describe: \"\",\r\n        income: \"\",\r\n        expend: \"\",\r\n        cash: \"\",\r\n        remark: \"\",\r\n        id: \"\"\r\n      };\r\n    },\r\n    handleSizeChange(page_size) {\r\n      // 切换size设置\r\n      this.paginations.page_index = 1;\r\n      this.paginations.page_size = page_size;\r\n      this.tableData = this.allTableData.filter((item, index) => {\r\n        return index < page_size;\r\n      });\r\n    },\r\n    handleCurrentChange(page) {\r\n      // 获取目标页第一项索引\r\n      let index = this.paginations.page_size * (page - 1);\r\n      // 获取目标页最后一项数据的后一项索引（即包含目标页之前所有数据数）\r\n      let nums = this.paginations.page_size * page;\r\n      // 容器\r\n      let tables = [];\r\n\r\n      for (let i = index; i < nums; i++) {\r\n        if (this.allTableData[i]) {\r\n          tables.push(this.allTableData[i]);\r\n        }\r\n        this.tableData = tables;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.fillcontain {\r\n  width: 100%;\r\n  height: 100%;\r\n  padding: 16px;\r\n  box-sizing: border-box;\r\n}\r\n.btnRight {\r\n  float: right;\r\n  margin: 0;\r\n}\r\n.pagination {\r\n  text-align: right;\r\n  margin-top: 10px;\r\n}\r\n</style>\r\n"]}]}